import{_ as s,c as a,o as n,a as l}from"./app.c4aa1f4f.js";const A=JSON.parse('{"title":"配置 ssh 连接服务器","description":"","frontmatter":{},"headers":[{"level":2,"title":"1、Mac 终端连接服务器","slug":"_1、mac-终端连接服务器","link":"#_1、mac-终端连接服务器","children":[]},{"level":2,"title":"2、Mac 配置 SSH 免密登录服务器","slug":"_2、mac-配置-ssh-免密登录服务器","link":"#_2、mac-配置-ssh-免密登录服务器","children":[]},{"level":2,"title":"3、配置完成","slug":"_3、配置完成","link":"#_3、配置完成","children":[]},{"level":2,"title":"4、出错","slug":"_4、出错","link":"#_4、出错","children":[]}],"relativePath":"end/node/配置ssh连接服务器.md","lastUpdated":1673417607000}'),p={name:"end/node/配置ssh连接服务器.md"},e=l(`<h1 id="配置-ssh-连接服务器" tabindex="-1">配置 ssh 连接服务器 <a class="header-anchor" href="#配置-ssh-连接服务器" aria-hidden="true">#</a></h1><h2 id="_1、mac-终端连接服务器" tabindex="-1">1、Mac 终端连接服务器 <a class="header-anchor" href="#_1、mac-终端连接服务器" aria-hidden="true">#</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">ssh -p 22 root@119.29.37.63</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>然后输入密码就可以连接。</p><h2 id="_2、mac-配置-ssh-免密登录服务器" tabindex="-1">2、Mac 配置 SSH 免密登录服务器 <a class="header-anchor" href="#_2、mac-配置-ssh-免密登录服务器" aria-hidden="true">#</a></h2><p>本地生成密钥</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">keygen </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">t rsa</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">Generating public</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">private rsa key pair</span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">Enter file </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> which to save the </span><span style="color:#82AAFF;">key</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Users</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Gary</span><span style="color:#89DDFF;">/.</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">id_rsa): </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Users</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Gary</span><span style="color:#89DDFF;">/.</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">id_rsa_tencent</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">剩下两个直接回车</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>将公钥复制到腾讯云上<code>SSH密钥</code>,并绑定服务器实例</p><p>也可以把公钥传到服务器<code>~/.ssh</code> <code>id_rsa_tencent.pub</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">cat </span><span style="color:#89DDFF;">~</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">id_rsa_tencent.pub &gt;&gt; ~</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">authorized_keys</span></span>
<span class="line"><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">copy</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">id </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i </span><span style="color:#89DDFF;">~/.</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">id_rsa_aliyun</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pub root@</span><span style="color:#F78C6C;">101.132</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">142.15</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">f</span></span>
<span class="line"></span></code></pre></div><p>在服务器上更改权限(必须)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">chmod </span><span style="color:#F78C6C;">755</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod </span><span style="color:#F78C6C;">700</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~/.</span><span style="color:#A6ACCD;">ssh</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod </span><span style="color:#F78C6C;">600</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~/.</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">authorized_keys</span></span>
<span class="line"></span></code></pre></div><p><strong>后续继续执行下面的操作</strong></p><p>导入公钥认证文件</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">cat </span><span style="color:#89DDFF;">~/.</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">id_rsa_tencent</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pub </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~/.</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">authorized_keys</span></span>
<span class="line"></span></code></pre></div><p>添加私钥</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">add </span><span style="color:#89DDFF;">~/.</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">id_rsa_tencent</span></span>
<span class="line"></span></code></pre></div><p>创建 config 文件</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;"># Tencent</span></span>
<span class="line"><span style="color:#A6ACCD;">Host qq</span></span>
<span class="line"><span style="color:#A6ACCD;">Hostname </span><span style="color:#F78C6C;">119.25</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">6.181</span></span>
<span class="line"><span style="color:#A6ACCD;">Port </span><span style="color:#F78C6C;">22</span></span>
<span class="line"><span style="color:#A6ACCD;">User root</span></span>
<span class="line"></span></code></pre></div><h2 id="_3、配置完成" tabindex="-1">3、配置完成 <a class="header-anchor" href="#_3、配置完成" aria-hidden="true">#</a></h2><p>终端输入</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">ssh qq</span></span>
<span class="line"></span></code></pre></div><p>就可以直接登录服务器了</p><p>退出服务器直接输入命令<code>logout</code>或者<code>exit</code></p><h2 id="_4、出错" tabindex="-1">4、出错 <a class="header-anchor" href="#_4、出错" aria-hidden="true">#</a></h2><p>有时候每次都报</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">Permission </span><span style="color:#82AAFF;">denied</span><span style="color:#A6ACCD;"> (publickey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">gssapi</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">keyex</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">gssapi</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">with</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">mic</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">password)</span><span style="color:#89DDFF;">.</span></span>
<span class="line"></span></code></pre></div><p>结果要在<code>config</code>文件下 对应的配置<code>IdentityFile ~/.ssh/id_rsa_tencent</code></p><p>执行<code>ssh-add</code>出现<code>Could not open a connection to your authentication agent</code></p><p>在执行 <code>ssh-add ~/.ssh/id_ras </code>时发生此错，</p><p>执行如下命令　<code>ssh-agent bash</code> 然后再执行 <code>ssh-add ~/.ssh/id_ras</code> 即可。</p><p><a href="https://developer.aliyun.com/article/709474" target="_blank" rel="noreferrer">ssh 免密码登录全过程</a></p>`,33),o=[e];function t(c,r,i,C,D,y){return n(),a("div",null,o)}const h=s(p,[["render",t]]);export{A as __pageData,h as default};
